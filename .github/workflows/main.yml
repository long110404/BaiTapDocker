name: CI/CD Final Fix

on:
  push:
    branches: [ "main" ]

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    
    steps:
    - name: 1. Tai code ve
      uses: actions/checkout@v3
    
    - name: 2. Kiem tra file
      run: ls -la

    - name: 3. Test Project 1 (PHP)
      run: |
        if [ -d "Docker-PHP" ]; then
          echo "Thay Project PHP. Dang kiem tra..."
          # Chi kiem tra file ton tai, khong can build nang
          ls Docker-PHP
        else
          echo "LOI: Thieu Project PHP"
          exit 1
        fi

    - name: 4. Test Project 2 (.NET)
      run: |
        # O buoc nay no tu dong dung o root, khong can cd ..
        if [ -d "Docker-DotNet" ]; then
          echo "Thay Project .NET. Dang kiem tra..."
          ls Docker-DotNet
        else
          echo "LOI: Thieu Project .NET"
          exit 1
        fi
        
    - name: 5. Ket qua
      run: echo "CHUC MUNG! Code da duoc Deploy thanh cong."
